name: GSF Website SCI
description: generates SCI score (gCO2eq/visit) for greensoftware.foundation website
tags: null
aggregation:
  metrics:
    - carbon
    - sci
  type: both
initialize:
  plugins:
    duration-in-hours:
      path: builtin
      method: Divide
      global-config:
        numerator: duration
        denominator: 3600
        output: duration-in-hours
    storage-and-traffic-from-github-if-docs:
      path: if-github-plugin
      method: Github
      global-config:
        repo: Green-Software-Foundation/if-docs
    copy-param-if-docs-repo-size:
      path: builtin
      method: Copy
      global-config:
        keep-existing: false
        from: size
        to: repo-size-if-docs
    copy-param-if-docs-clones:
      path: builtin
      method: Copy
      global-config:
        keep-existing: false
        from: clones
        to: repo-clones-if-docs
    storage-in-gb-to-tb-if-docs:
      path: builtin
      method: Coefficient
      global-config:
        input-parameter: repo-size-if-docs
        coefficient: 0.001
        output-parameter: storage-tb-if-docs
    storage-energy-in-watts-if-docs:
      path: builtin
      method: Multiply
      global-config:
        input-parameters:
          - storage-tb-if-docs
          - watts-per-tb
        output-parameter: storage-watts-if-docs
    storage-energy-in-wh-if-docs:
      path: builtin
      method: Multiply
      global-config:
        input-parameters:
          - storage-watts-if-docs
          - duration-in-hours
        output-parameter: storage-wh-if-docs
    storage-energy-to-kwh-if-docs:
      path: builtin
      method: Coefficient
      global-config:
        input-parameter: storage-wh-if-docs
        coefficient: 0.001
        output-parameter: energy
    energy-to-carbon:
      path: builtin
      method: Multiply
      global-config:
        input-parameters:
          - energy
          - grid-intensity
        output-parameter: carbon
    static-site-size-in-tb:
      path: builtin
      method: Divide
      global-config:
        numerator: static-site-size-in-mb
        denominator: 1000000
        output: static-site-size-in-tb
    storage-energy-static-site-in-watts:
      path: builtin
      method: Multiply
      global-config:
        input-parameters:
          - static-site-size-in-tb
          - watts-per-tb
        output-parameter: storage-watts-static-site-at-origin
    storage-energy-in-wh-static-site:
      path: builtin
      method: Multiply
      global-config:
        input-parameters:
          - storage-watts-static-site-at-origin
          - duration-in-hours
        output-parameter: storage-wh-static-site-at-origin
    storage-energy-to-kwh-static-site:
      path: builtin
      method: Coefficient
      global-config:
        input-parameter: storage-wh-static-site-at-origin
        coefficient: 0.001
        output-parameter: storage-energy-kwh-static-site-at-origin
    storage-energy-per-cdn-node:
      path: builtin
      method: Divide
      global-config:
        numerator: storage-energy-kwh-static-site-at-origin
        denominator: 10
        output: storage-energy-per-cdn-node
    storage-energy-for-entire-cdn:
      path: builtin
      method: Coefficient
      global-config:
        input-parameter: storage-energy-per-cdn-node
        coefficient: 46
        output-parameter: storage-energy-whole-cdn
    sum-serving-static-site-energy-components:
      path: builtin
      method: Sum
      global-config:
        input-parameters:
          - storage-energy-whole-cdn
          - storage-energy-kwh-static-site-at-origin
        output-parameter: energy
    static-site-size-in-gb:
      path: builtin
      method: Coefficient
      global-config:
        input-parameter: static-site-size-in-mb
        coefficient: 0.000001
        output-parameter: static-site-size-in-gb
    network-energy-serving-static-site-per-view:
      path: builtin
      method: Multiply
      global-config:
        input-parameters:
          - static-site-size-in-gb
          - kwh-per-gb-network
        output-parameter: network-energy-kwh-serving-static-site-per-view
    network-energy-serving-static-site-total:
      path: builtin
      method: Multiply
      global-config:
        input-parameters:
          - network-energy-kwh-serving-static-site-per-view
          - visits-per-month
        output-parameter: energy
    end-user-energy:
      path: builtin
      method: Multiply
      global-config:
        input-parameters:
          - visits-per-month
          - static-site-size-in-gb
          - end-user-energy-coefficient
        output-parameter: energy
    interpolate-power-curve:
      path: builtin
      method: Interpolation
      global-config:
        method: linear
        x:
          - 0
          - 10
          - 50
          - 100
        'y':
          - 0.12
          - 0.32
          - 0.75
          - 1.02
        input-parameter: cpu-utilization-during-build
        output-parameter: cpu-factor
    build-stage-cpu-factor-to-wattage:
      path: builtin
      method: Multiply
      global-config:
        input-parameters:
          - cpu-factor
          - thermal-design-power
        output-parameter: cpu-wattage
    build-stage-cpu-wattage-times-build-duration:
      path: builtin
      method: Multiply
      global-config:
        input-parameters:
          - cpu-wattage
          - build-duration
        output-parameter: cpu-wattage-times-duration
    build-stage-cpu-wattage-to-energy-kwh:
      path: builtin
      method: Divide
      global-config:
        numerator: cpu-wattage-times-duration
        denominator: 3600000
        output: build-energy-cpu-kwh
    memory-coefficient-correction:
      path: builtin
      method: Coefficient
      global-config:
        input-parameter: build-duration
        coefficient: 0.000006533333
        output-parameter: memory-coefficient
    memory-energy-per-build:
      path: builtin
      method: Multiply
      global-config:
        input-parameters:
          - build-memory-gb
          - memory-coefficient
        output-parameter: build-energy-memory-kwh
    sum-build-energy-components:
      path: builtin
      method: Sum
      global-config:
        input-parameters:
          - build-energy-cpu-kwh
          - build-energy-memory-kwh
        output-parameter: build-energy-kwh-per-build
    build-energy-total:
      path: builtin
      method: Multiply
      global-config:
        input-parameters:
          - build-energy-kwh-per-build
          - builds-per-month
        output-parameter: energy
    sci:
      path: builtin
      method: Sci
      global-config:
        functional-unit: visits-per-month
execution:
  command: >-
    /home/joe/.npm/_npx/1bf7c3c15bf47d04/node_modules/.bin/ts-node
    /home/joe/Code/if/src/if-run/index.ts -m manifests/examples/gsf-website.yml
    -o manifest/outputs/gsf-website-output
  environment:
    if-version: 0.6.0
    os: linux
    os-version: 5.15.0-117-generic
    node-version: 21.4.0
    date-time: 2024-08-19T10:58:12.137Z (UTC)
    dependencies:
      - '@babel/core@7.22.10'
      - '@babel/preset-typescript@7.23.3'
      - '@commitlint/cli@18.6.0'
      - '@commitlint/config-conventional@18.6.0'
      - '@grnsft/if-core@0.0.16'
      - '@grnsft/if-unofficial-plugins@v0.3.1'
      - '@jest/globals@29.7.0'
      - '@types/jest@29.5.8'
      - '@types/js-yaml@4.0.9'
      - '@types/luxon@3.4.2'
      - '@types/node@20.9.0'
      - axios-mock-adapter@1.22.0
      - axios@1.7.2
      - cross-env@7.0.3
      - csv-parse@5.5.6
      - csv-stringify@6.4.6
      - fixpack@4.0.0
      - gts@5.2.0
      - husky@8.0.3
      - if-eco-ci-plugin@v0.0.1 extraneous -> file:../../if-eco-ci-plugin
      - if-github-plugin@v0.0.1 extraneous -> file:../../if-github-plugin
      - jest@29.7.0
      - js-yaml@4.1.0
      - lint-staged@15.2.2
      - luxon@3.4.4
      - release-it@16.3.0
      - rimraf@5.0.5
      - ts-command-line-args@2.5.1
      - ts-jest@29.1.1
      - typescript-cubic-spline@1.0.1
      - typescript@5.2.2
      - winston@3.11.0
      - zod@3.23.8
  status: success
tree:
  children:
    github-storage-for-if-docs:
      pipeline:
        compute:
          - duration-in-hours
          - storage-and-traffic-from-github-if-docs
          - copy-param-if-docs-repo-size
          - copy-param-if-docs-clones
          - storage-in-gb-to-tb-if-docs
          - storage-energy-in-watts-if-docs
          - storage-energy-in-wh-if-docs
          - storage-energy-to-kwh-if-docs
          - energy-to-carbon
          - sci
      defaults:
        watts-per-tb: 1.2
        grid-intensity: 765.49
        visits-per-month: 325
      inputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
      outputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
          watts-per-tb: 1.2
          grid-intensity: 765.49
          visits-per-month: 325
          duration-in-hours: 672
          clones: 0
          repo-size-if-docs: 0.011354
          repo-clones-if-docs: 0
          storage-tb-if-docs: 0.000011354
          storage-watts-if-docs: 0.0000136248
          storage-wh-if-docs: 0.0091558656
          energy: 0.0000091558656
          carbon: 0.007008723558144
          sci: 0.000021565303255827694
      aggregated:
        carbon: 0.007008723558144
        sci: 0.000021565303255827694
    storing-static-site-data-on-netlify:
      pipeline:
        compute:
          - duration-in-hours
          - static-site-size-in-tb
          - storage-energy-static-site-in-watts
          - storage-energy-in-wh-static-site
          - storage-energy-to-kwh-static-site
          - storage-energy-per-cdn-node
          - storage-energy-for-entire-cdn
          - sum-serving-static-site-energy-components
          - energy-to-carbon
          - sci
      defaults:
        static-site-size-in-mb: 0.809473
        watts-per-tb: 1.2
        grid-intensity: 765.49
        visits-per-month: 325
      inputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
      outputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
          static-site-size-in-mb: 0.809473
          watts-per-tb: 1.2
          grid-intensity: 765.49
          visits-per-month: 325
          duration-in-hours: 672
          static-site-size-in-tb: 8.09473e-7
          storage-watts-static-site-at-origin: 9.713676e-7
          storage-wh-static-site-at-origin: 0.0006527590272
          storage-energy-kwh-static-site-at-origin: 6.527590272e-7
          storage-energy-per-cdn-node: 6.527590272e-8
          storage-energy-whole-cdn: 0.0000030026915251199997
          energy: 0.00000365545055232
          carbon: 0.0027982108432954367
          sci: 0.000008609879517832113
      aggregated:
        carbon: 0.0027982108432954367
        sci: 0.000008609879517832113
    networking-energy-to-serve-static-site-over-the-wire:
      pipeline:
        compute:
          - static-site-size-in-gb
          - network-energy-serving-static-site-per-view
          - network-energy-serving-static-site-total
          - energy-to-carbon
          - sci
      defaults:
        static-site-size-in-mb: 0.809473
        kwh-per-gb-network: 0.001
        watts-per-tb: 1.2
        grid-intensity: 765.49
        visits-per-month: 325
      inputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
      outputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
          static-site-size-in-mb: 0.809473
          kwh-per-gb-network: 0.001
          watts-per-tb: 1.2
          grid-intensity: 765.49
          visits-per-month: 325
          static-site-size-in-gb: 8.094729999999999e-7
          network-energy-kwh-serving-static-site-per-view: 8.094729999999999e-10
          energy: 2.63078725e-7
          carbon: 0.00020138413320025
          sci: 6.1964348677e-7
      aggregated:
        carbon: 0.00020138413320025
        sci: 6.1964348677e-7
    end-user-operational-carbon:
      pipeline:
        compute:
          - static-site-size-in-gb
          - end-user-energy
          - energy-to-carbon
          - sci
      defaults:
        end-user-energy-coefficient: 0.08
        static-site-size-in-mb: 0.809473
        kwh-per-gb-network: 0.001
        grid-intensity: 765.49
        visits-per-month: 325
      inputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
      outputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
          end-user-energy-coefficient: 0.08
          static-site-size-in-mb: 0.809473
          kwh-per-gb-network: 0.001
          grid-intensity: 765.49
          visits-per-month: 325
          static-site-size-in-gb: 8.094729999999999e-7
          energy: 0.000021046297999999997
          carbon: 0.01611073065602
          sci: 0.0000495714789416
      aggregated:
        carbon: 0.01611073065602
        sci: 0.0000495714789416
    netlify-builds:
      pipeline:
        compute:
          - interpolate-power-curve
          - build-stage-cpu-factor-to-wattage
          - build-stage-cpu-wattage-times-build-duration
          - build-stage-cpu-wattage-to-energy-kwh
          - memory-coefficient-correction
          - memory-energy-per-build
          - sum-build-energy-components
          - build-energy-total
          - energy-to-carbon
          - sci
      defaults:
        end-user-energy-coefficient: 0.08
        static-site-size-in-mb: 0.809473
        kwh-per-gb-network: 0.001
        grid-intensity: 765.49
        visits-per-month: 325
        build-duration: 7
        build-memory-gb: 0.48
        builds-per-month: 5
        thermal-design-power: 205
        cpu-utilization-during-build: 100
      inputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
      outputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
          end-user-energy-coefficient: 0.08
          static-site-size-in-mb: 0.809473
          kwh-per-gb-network: 0.001
          grid-intensity: 765.49
          visits-per-month: 325
          build-duration: 7
          build-memory-gb: 0.48
          builds-per-month: 5
          thermal-design-power: 205
          cpu-utilization-during-build: 100
          cpu-factor: 1.02
          cpu-wattage: 209.1
          cpu-wattage-times-duration: 1463.7
          build-energy-cpu-kwh: 0.00040658333333333334
          memory-coefficient: 0.000045733331
          build-energy-memory-kwh: 0.000021951998880000002
          build-energy-kwh-per-build: 0.00042853533221333336
          energy: 0.0021426766610666667
          carbon: 1.6401975572799228
          sci: 0.005046761714707455
      aggregated:
        carbon: 1.6401975572799228
        sci: 0.005046761714707455
    embodied-carbon-for-web-server:
      pipeline:
        compute:
          - sci
      defaults:
        visits-per-month: 325
      inputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
          carbon: 0.0718
      outputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
          carbon: 0.0718
          visits-per-month: 325
          sci: 0.00022092307692307694
      aggregated:
        carbon: 0.0718
        sci: 0.00022092307692307694
    embodied-carbon-for-github-server:
      pipeline:
        compute:
          - sci
      defaults:
        visits-per-month: 325
      inputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
          carbon: 0.0071
      outputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
          carbon: 0.0071
          visits-per-month: 325
          sci: 0.000021846153846153848
      aggregated:
        carbon: 0.0071
        sci: 0.000021846153846153848
    embodied-carbon-for-end-user-devices:
      pipeline:
        compute:
          - sci
      defaults:
        visits-per-month: 325
      inputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
          carbon: 313.9
      outputs:
        - timestamp: 2024-08-13T00:00
          duration: 2419200
          carbon: 313.9
          visits-per-month: 325
          sci: 0.9658461538461538
      aggregated:
        carbon: 313.9
        sci: 0.9658461538461538
  outputs:
    - carbon: 315.64521660647057
      sci: 0.9712160510968325
      timestamp: 2024-08-13T00:00
      duration: 2419200
  aggregated:
    carbon: 315.64521660647057
    sci: 0.9712160510968325
