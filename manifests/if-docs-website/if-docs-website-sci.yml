name: IF Website SCI
description: generates SCI score (gCO2eq/visit) for if.greensoftware.foundation website
tags:
aggregation:
  metrics:
    - carbon
    - sci
  type: both
explainer: true
initialize:
  plugins:
    ## Unit conversions
    ##################

    duration-in-hours:
      method: Divide
      path: 'builtin'
      config:
        numerator: duration
        denominator: 3600 # s to hr
        output: duration-in-hours

    ## Github storage for IF docs
    ########################

    storage-and-traffic-from-github-if-docs:
      method: Github
      path: if-github-plugin
      config:
        repo: Green-Software-Foundation/if-docs
      mapping: # rename outputs
        'size': 'repo-size-if-docs'
        'clones': 'repo-clones-if-docs'
      parameter-metadata:
        outputs:
          repo-clones-if-docs:
            unit: number
            description: the clones count of the if-docs repository in the specified time range. Renamed from default "clones" output param.
            aggregation-method:
              time: sum
              component: sum
          repo-size-if-docs:
            unit: GB
            description: the size of the if-docs repository. Renamed from default "size" output param.
            aggregation-method:
              time: sum
              component: sum

    storage-in-gb-to-tb-if-docs:
      method: Coefficient
      path: builtin
      config:
        input-parameter: repo-size-if-docs # size comes from github api and represents repo size in gb
        coefficient: 0.001 # convert size to tb
        output-parameter: 'storage-tb-if-docs'
      parameter-metadata:
        inputs:
          repo-size-if-docs:
            unit: GB
            description: the size of the if-docs repository. Renamed from default "size" output param in "storage-and-traffic-from-github-if-docs".
            aggregation-method:
              time: sum
              component: sum
        outputs:
          storage-tb-if-docs:
            unit: TB
            description: Storage size of Github if-docs repo in terabytes.
            aggregation-method:
              time: copy
              component: copy

    storage-energy-in-watts-if-docs:
      method: Multiply
      path: builtin
      config:
        input-parameters: ['storage-tb-if-docs', 'watts-per-tb']
        output-parameter: 'storage-watts-if-docs'
      parameter-metadata:
        inputs:
          storage-tb-if-docs:
            unit: TB
            description: the size of the if-docs repository. Renamed from default "size" output param in "storage-and-traffic-from-github-if-docs".
            aggregation-method:
              time: copy
              component: copy
          watt-hours-per-tb-hour:
            unit: Wh
            description: Coefficient relating the storage size in TB to energy in Watts, taken from CCF.
            aggregation-method:
              time: copy
              component: copy
        outputs:
          storage-watts-if-docs:
            unit: W
            description: Watts consumed storing IF docs repository.
            aggregation-method:
              time: sum
              component: sum

    storage-energy-in-wh-if-docs:
      method: Multiply
      path: builtin
      config:
        input-parameters: ['storage-watts-if-docs', 'duration-in-hours']
        output-parameter: 'storage-wh-if-docs'
      parameter-metadata:
        inputs:
          storage-watts-if-docs:
            unit: W
            description: Watts consumed storing IF docs repository.
            aggregation-method:
              time: sum
              component: sum
          duration-in-hours:
            unit: hours
            description: duration of the timestep converted from seconds to hours.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          storage-wh-if-docs:
            unit: Wh
            description: Energy consumed storing IF docs repository in Watt hours.
            aggregation-method:
              time: sum
              component: sum

    storage-energy-to-kwh-if-docs:
      path: 'builtin'
      method: Coefficient
      config:
        input-parameter: storage-wh-if-docs
        coefficient: 0.001
        output-parameter: energy
      parameter-metadata:
        inputs:
          storage-wh-if-docs:
            unit: Wh
            description: Energy consumed storing IF docs repository in Watt hours.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          energy:
            unit: kWh
            description: Energy consumed storing IF docs repository in kWh.
            aggregation-method:
              time: sum
              component: sum

    energy-to-carbon:
      method: Multiply
      path: 'builtin'
      config:
        input-parameters: ['energy', 'grid-intensity']
        output-parameter: 'carbon'
      parameter-metadata:
        inputs:
          energy:
            unit: kWh
            description: Energy consumed in kWh.
            aggregation-method:
              time: sum
              component: sum
          grid-intensity:
            unit: gCO2e/kWh
            description: Mass of carbon dioxide equivalent emitted per kWh of energy consumed.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          carbon:
            unit: gCO2e
            description: Mass of CO2e emitted.
            aggregation-method:
              time: sum
              component: sum

    ## storing static site on gh-pages
    #################################

    static-site-size-in-tb:
      method: Divide
      path: 'builtin'
      config:
        numerator: static-site-size-in-mb
        denominator: 1000000 # s to hr
        output: static-site-size-in-tb
      parameter-metadata:
        inputs:
          static-site-size-in-mb:
            unit: MB
            description: Size of the static site, taken from Google PageSpeed API.
            aggregation-method:
              time: copy
              component: copy
        outputs:
          static-site-size-in-tb:
            unit: TB
            description: Size of the static site, taken from Google PageSpeed API.
            aggregation-method:
              time: sum
              component: sum

    storage-energy-static-site-in-watts:
      method: Multiply
      path: builtin
      config:
        input-parameters: ['static-site-size-in-tb', 'watts-per-tb']
        output-parameter: 'storage-watts-static-site-at-origin'
      parameter-metadata:
        inputs:
          static-site-size-in-tb:
            unit: TB
            description: Size of the static site, taken from Google PageSpeed API.
            aggregation-method:
              time: sum
              component: sum
          watt-hours-per-tb-hour:
            unit: Wh
            description: Energy required to store 1 TB of data for 1 hour on an SSD, taken from CCF.
            aggregation-method:
              time: copy
              component: copy
        outputs:
          storage-watt-hours-static-site-at-origin:
            unit: Wh
            description: Energy required to store the IF docs repo for one hour.
            aggregation-method:
              time: sum
              component: sum

    storage-energy-in-wh-static-site:
      method: Multiply
      path: builtin
      config:
        input-parameters:
          ['storage-watts-static-site-at-origin', 'duration-in-hours']
        output-parameter: 'storage-wh-static-site-at-origin'
      parameter-metadata:
        inputs:
          storage-watt-hours-static-site-at-origin:
            unit: Wh
            description: Energy required to store the IF docs repo for one hour.
            aggregation-method:
              time: sum
              component: sum
          duration-in-hours:
            unit: hours
            description: duration of the timestep converted from seconds to hours.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          storage-wh-static-site-at-origin:
            unit: Wh
            description: Energy required to store the IF docs repo in each timestep.
            aggregation-method:
              time: sum
              component: sum

    storage-energy-to-kwh-static-site:
      path: 'builtin'
      method: Coefficient
      config:
        input-parameter: storage-wh-static-site-at-origin
        coefficient: 0.001
        output-parameter: storage-energy-kwh-static-site-at-origin
      parameter-metadata:
        inputs:
          storage-wh-static-site-at-origin:
            unit: Wh
            description: Energy required to store the IF docs repo in each timestep.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          storage-energy-kwh-static-site-at-origin:
            unit: kWh
            description: Energy required to store the IF docs repo in each timestep, in kWh.
            aggregation-method:
              time: sum
              component: sum

    ## CDN
    #######

    storage-energy-per-cdn-node:
      method: Divide
      path: 'builtin'
      config:
        numerator: storage-energy-kwh-static-site-at-origin
        denominator: 10 # s to hr
        output: storage-energy-per-cdn-node
      parameter-metadata:
        inputs:
          storage-energy-kwh-static-site-at-origin:
            unit: kWh
            description: Energy required to store the IF docs repo in each timestep, in kWh.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          storage-energy-per-cdn-node:
            unit: kWh
            description: Energy required to store the static site at each CDN PoP, assuming it to be 10% of that at the origin.
            aggregation-method:
              time: sum
              component: sum

    storage-energy-for-entire-cdn:
      method: Coefficient
      path: 'builtin'
      config:
        input-parameter: storage-energy-per-cdn-node
        coefficient: 46 # there are 46 PoPs on Fastly, which we think GH uses for CDN
        output-parameter: storage-energy-whole-cdn
      parameter-metadata:
        inputs:
          storage-energy-per-cdn-node:
            unit: kWh
            description: Energy required to store the static site at each CDN PoP, assuming it to be 10% of that at the origin.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          storage-energy-whole-cdn:
            unit: kWh
            description: Energy required to store the static site across the entire CDN, assuming 46 PoPs.
            aggregation-method:
              time: sum
              component: sum

    sum-serving-static-site-energy-components:
      method: Sum
      path: builtin
      config:
        input-parameters:
          [
            'storage-energy-whole-cdn',
            'storage-energy-kwh-static-site-at-origin',
          ]
        output-parameter: 'energy'
      parameter-metadata:
        inputs:
          storage-energy-whole-cdn:
            unit: kWh
            description: Energy required to store the static site across the entire CDN, assuming 46 PoPs.
            aggregation-method:
              time: sum
              component: sum
          storage-energy-kwh-static-site-at-origin:
            unit: kWh
            description: Energy required to store the IF docs repo in each timestep, in kWh.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          energy:
            unit: kWh
            description: Energy required to serve site from origin and CDN, in kWh.
            aggregation-method:
              time: sum
              component: sum

    ## Networking energy to serve static site to users
    ##################################################

    static-site-size-in-gb:
      method: Coefficient
      path: builtin
      config:
        input-parameter: static-site-size-in-mb # size comes from github api and represents repo size in gb
        coefficient: 0.001 # convert size to tb
        output-parameter: 'static-site-size-in-gb'
      parameter-metadata:
        inputs:
          static-site-size-in-mb:
            unit: MB
            description: Size of static site as reported by Github API.
            aggregation-method:
              time: copy
              component: copy
        outputs:
          static-site-size-in-gb:
            unit: GB
            description: Size of static site as reported by Github API, converted to GB.
            aggregation-method:
              time: copy
              component: copy

    network-energy-serving-static-site-per-view:
      method: Multiply
      path: builtin
      config:
        input-parameters: ['static-site-size-in-gb', 'kwh-per-gb-network']
        output-parameter: 'network-energy-kwh-serving-static-site-per-view'
      parameter-metadata:
        inputs:
          static-site-size-in-gb:
            unit: GB
            description: Size of static site as reported by Github API, converted to GB.
            aggregation-method:
              time: copy
              component: copy
          kwh-per-gb-network:
            unit: kWh/GB
            description: Coefficient relating energy expendidture to 1GB of data transferred over network.
            aggregation-method:
              time: copy
              component: copy
        outputs:
          network-energy-kwh-serving-static-site-per-view:
            unit: kWh
            description: Energy required to transfer static site data over the network, for each first-time visitor.
            aggregation-method:
              time: sum
              component: sum

    network-energy-serving-static-site-total:
      method: Multiply
      path: builtin
      config:
        input-parameters:
          [network-energy-kwh-serving-static-site-per-view, 'site-visits']
        output-parameter: energy
      parameter-metadata:
        inputs:
          network-energy-kwh-serving-static-site-per-view:
            unit: kWh
            description: Energy required to transfer static site data over the network, for each first-time visitor.
            aggregation-method:
              time: sum
              component: sum
          site-visits:
            unit: visits
            description: Number of times the site was visited in this timestep, from Google Analytics
            aggregation-method:
              time: sum
              component: sum
        outputs:
          energy:
            unit: kWh
            description: Energy required to transfer static site data over the network, for all users in timestep.
            aggregation-method:
              time: sum
              component: sum

    ## End user energy
    ##################

    end-user-energy:
      method: Multiply
      path: builtin
      config:
        input-parameters:
          [site-visits, static-site-size-in-gb, end-user-energy-coefficient]
        output-parameter: energy
      parameter-metadata:
        inputs:
          site-visits:
            unit: visits
            description: Number of times the site was visited in this timestep, from Google Analytics
            aggregation-method:
              time: sum
              component: sum
          static-site-size-in-gb:
            unit: GB
            description: Size of static site as reported by Github API, converted to GB.
            aggregation-method:
              time: copy
              component: copy
          end-user-energy-coefficient:
            unit: kWh
            description: Coefficient for end user energy expended viewing site in browser, from Sustainable Web Design model.
            aggregation-method:
              time: copy
              component: copy
        outputs:
          energy:
            unit: kWh
            description: Energy consumed by all users viewing the site in their browser, in timestep.
            aggregation-method:
              time: sum
              component: sum

    ## Build energy: gh-pages
    #########################
    interpolate-power-curve:
      method: Interpolation
      path: 'builtin'
      config:
        method: linear
        x: [0, 10, 50, 100]
        y: [0.12, 0.32, 0.75, 1.02]
        input-parameter: 'cpu-utilization-during-build'
        output-parameter: 'cpu-factor'
      parameter-metadata:
        inputs:
          cpu-utilization-during-build:
            unit: percent
            description: percentage total CPU utilization during build process
            aggregation-method:
              time: avg
              component: avg
        outputs:
          cpu-factor:
            unit: dimensionless
            description: A multiplier applied to the processor TDP to estimate power draw.
            aggregation-method:
              time: copy
              component: copy

    build-stage-cpu-factor-to-wattage:
      method: Multiply
      path: builtin
      config:
        input-parameters: ['cpu-factor', 'thermal-design-power']
        output-parameter: 'cpu-wattage'
      parameter-metadata:
        inputs:
          cpu-factor:
            unit: dimensionless
            description: A multiplier applied to the processor TDP to estimate power draw.
            aggregation-method:
              time: copy
              component: copy
          thermal-design-power:
            unit: W
            description: Estimate of the maximum power draw by a processor.
            aggregation-method:
              time: copy
              component: copy
        outputs:
          cpu-wattage:
            unit: W
            description: Power used by CPU during build process, estimated as the product of the cpu-factor and the TDP.
            aggregation-method:
              time: sum
              component: sum

    build-stage-cpu-wattage-times-build-duration:
      method: Multiply
      path: builtin
      config:
        input-parameters: ['cpu-wattage', 'build-duration']
        output-parameter: 'cpu-wattage-times-duration'
      parameter-metadata:
        inputs:
          cpu-wattage:
            unit: W
            description: Power used by CPU during build process,estimated as the product of the cpu-factor and the TDP.
            aggregation-method:
              time: sum
              component: sum
          build-duration:
            unit: s
            description: Time taken for build process to complete.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          cpu-wattage-times-duration:
            unit: Ws
            description: Energy used by CPU during build process.
            aggregation-method:
              time: sum
              component: sum

    build-stage-cpu-wattage-to-energy-kwh:
      method: Divide
      path: 'builtin'
      config:
        numerator: cpu-wattage-times-duration
        denominator: 3600000
        output: build-energy-cpu-kwh
      parameter-metadata:
        inputs:
          cpu-wattage-times-duration:
            unit: Ws
            description: Energy used by CPU during build process.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          build-energy-cpu-kwh:
            unit: kWh
            description: Energy used by CPU during build process, converted to kWh.
            aggregation-method:
              time: sum
              component: sum

    memory-coefficient-correction: # memory coefficient in CCF is given /GB/hr - we want to convert to /GB/run-time-duration then x by run duration in s
      path: builtin
      method: Coefficient
      config:
        input-parameter: build-duration
        coefficient: 0.000006533333 # this is 0.000392/60 = KW/GB/H -> KW/GB/s
        output-parameter: memory-coefficient
      parameter-metadata:
        inputs:
          build-duration:
            unit: s
            description: Time taken for build process to complete.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          memory-coefficient:
            unit: kW/GB/s
            description: Energy used per GB of memory, per second. Converted from CCF coefficient expressed in kW/GB/h kWh.
            aggregation-method:
              time: sum
              component: sum

    memory-energy-per-build:
      path: builtin
      method: Multiply
      config:
        input-parameters: [build-memory-gb, memory-coefficient]
        output-parameter: build-energy-memory-kwh
      parameter-metadata:
        inputs:
          build-memory-gb:
            unit: GB
            description: Memory used during build process.
            aggregation-method:
              time: sum
              component: sum
          memory-coefficient:
            unit: kW/GB/s
            description: Energy used per GB of memory, per second. Converted from CCF coefficient expressed in kW/GB/h kWh.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          build-energy-memory-kwh:
            unit: kWh
            description: Energy consumed during build process due to memory usage.
            aggregation-method:
              time: sum
              component: sum

    sum-build-energy-components:
      method: Sum
      path: builtin
      config:
        input-parameters: ['build-energy-cpu-kwh', 'build-energy-memory-kwh']
        output-parameter: 'build-energy-kwh-per-build'
      parameter-metadata:
        inputs:
          build-energy-cpu-kwh:
            unit: kWh
            description: Energy used by CPU during build process, converted to kWh.
            aggregation-method:
              time: sum
              component: sum
          build-energy-memory-kwh:
            unit: kWh
            description: Energy consumed during build process due to memory usage.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          build-energy-kwh-per-build:
            unit: kWh
            description: Total Energy consumed during build process due to memory and CPU usage, per build.
            aggregation-method:
              time: sum
              component: sum

    build-energy-total:
      path: builtin
      method: Multiply
      config:
        input-parameters: [build-energy-kwh-per-build, builds-per-month]
        output-parameter: energy
      parameter-metadata:
        inputs:
          build-energy-kwh-per-build:
            unit: kWh
            description: Total Energy consumed during build process due to memory and CPU usage.
            aggregation-method:
              time: sum
              component: sum
          builds:
            unit: builds
            description: Number of builds that happened in the given timestep.
            aggregation-method:
              time: sum
              component: sum
        outputs:
          energy:
            unit: kWh
            description: Total Energy consumed during build process due to memory and CPU usage, for all builds.
            aggregation-method:
              time: sum
              component: sum

    ## Embodied Carbon
    ##################

    total-embodied-carbon:
      path: builtin
      method: Multiply
      config:
        input-parameters: [carbon-per-device, site-visits]
        output-parameter: carbon
      parameter-metadata:
        inputs:
          carbon-per-device:
            unit: gCO2e
            description: Mass of embodied carbon per user device.
            aggregation-method:
              time: sum
              component: sum
          site-visits:
            unit: visits
            description: Number of times the site was visited in this timestep, from Google Analytics
            aggregation-method:
              time: sum
              component: sum
        outputs:
          carbon:
            unit: gCO2e
            description: Mass of carbon emitted for all the end-user devices used to visit our site.
            aggregation-method:
              time: sum
              component: sum

    embodied-carbon-github:
      path: builtin
      method: SciEmbodied
      config:
        output-parameter: carbon
        vCPUs: 160
        memory: 1280
      parameter-metadata:
        outputs:
          carbon:
            unit: gCO2e
            description: Mass of carbon emitted in the production and disposal of Github server serving our source code.
            aggregation-method:
              time: sum
              component: sum

    embodied-carbon-web-server-origin:
      path: builtin
      method: SciEmbodied
      config:
        baseline-emissions: 1000000
        lifespan: 116121600
        output-parameter: carbon
      parameter-metadata:
        outputs:
          carbon:
            unit: gCO2e
            description: Mass of carbon emitted in the production and disposal of the server serving our site.
            aggregation-method:
              time: sum
              component: sum

    embodied-carbon-web-server-cdn:
      path: builtin
      method: SciEmbodied
      config:
        output-parameter: carbon
        baseline-emissions: 4600000
        lifespan: 116121600
      parameter-metadata:
        outputs:
          carbon:
            unit: gCO2e
            description: Mass of carbon emitted in the production and disposal of the servers comprising the CDN serving our site.
            aggregation-method:
              time: sum
              component: sum

    embodied-carbon-devices:
      path: builtin
      method: SciEmbodied
      config:
        baseline-emissions: 73170
        lifespan: 116121600
        output-parameter: carbon-per-device
      parameter-metadata:
        inputs:
          baseline-emissions:
            unit: gCO2e
            description: Mass of carbon emitted in the production and disposal of a basic rack server with 1 CPU and 16GB RAM.
            aggregation-method:
              time: copy
              component: copy
          lifespan:
            unit: s
            description: Expected lifespan of server, in seconds.
            aggregation-method:
              time: copy
              component: copy
        outputs:
          carbon-per-device:
            unit: gCO2e
            description: Mass of carbon emitted in the production and disposal of end-user devices.
            aggregation-method:
              time: sum
              component: sum

    ## Calculate SCI
    ################

    sci:
      path: builtin
      method: Sci
      config:
        functional-unit: site-visits
      parameter-metadata:
        outputs:
          sci:
            description: software carbon intensity
            unit: gCO2 / visit
            aggregation-method:
              time: avg
              component: sum

tree:
  children:
    github-storage-for-if-docs:
      pipeline:
        compute:
          - duration-in-hours
          - storage-and-traffic-from-github-if-docs
          - storage-in-gb-to-tb-if-docs
          - storage-energy-in-watts-if-docs
          - storage-energy-in-wh-if-docs
          - storage-energy-to-kwh-if-docs
          - energy-to-carbon
          - sci
      defaults:
        watts-per-tb: 1.2 # https://www.cloudcarbonfootprint.org/docs/methodology/#storage
        grid-intensity: 765.49 # US average
      inputs:
        - timestamp: '2024-07-22T00:00:00'
          duration: 86400
          site-visits: 12
        - timestamp: '2024-07-23T00:00:00'
          duration: 86400
          site-visits: 5
        - timestamp: '2024-07-24T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-07-25T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-07-26T00:00:00'
          duration: 86400
          site-visits: 10
        - timestamp: '2024-07-27T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-07-28T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-07-29T00:00:00'
          duration: 86400
          site-visits: 11
        - timestamp: '2024-07-30T00:00:00'
          duration: 86400
          site-visits: 1
        - timestamp: '2024-07-31T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-01T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-02T00:00:00'
          duration: 86400
          site-visits: 30
        - timestamp: '2024-08-03T00:00:00'
          duration: 86400
          site-visits: 36
        - timestamp: '2024-08-04T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-05T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-06T00:00:00'
          duration: 86400
          site-visits: 2
        - timestamp: '2024-08-07T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-08T00:00:00'
          duration: 86400
          site-visits: 25
        - timestamp: '2024-08-09T00:00:00'
          duration: 86400
          site-visits: 31
        - timestamp: '2024-08-10T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-11T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-12T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-13T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-14T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-08-15T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-08-16T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-17T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-18T00:00:00'
          duration: 86400
          site-visits: 0

    storing-static-site-data-on-netlify:
      pipeline:
        compute:
          - duration-in-hours
          - static-site-size-in-tb
          - storage-energy-static-site-in-watts
          - storage-energy-in-wh-static-site
          - storage-energy-to-kwh-static-site
          - storage-energy-per-cdn-node
          - storage-energy-for-entire-cdn
          - sum-serving-static-site-energy-components
          - energy-to-carbon
          - sci
      defaults:
        static-site-size-in-mb: 1.4 # from google pagespeed api
        watts-per-tb: 1.2 # https://www.cloudcarbonfootprint.org/docs/methodology/#storage
        grid-intensity: 765.49 # US average
      inputs:
        - timestamp: '2024-07-22T00:00:00'
          duration: 86400
          site-visits: 12
        - timestamp: '2024-07-23T00:00:00'
          duration: 86400
          site-visits: 5
        - timestamp: '2024-07-24T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-07-25T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-07-26T00:00:00'
          duration: 86400
          site-visits: 10
        - timestamp: '2024-07-27T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-07-28T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-07-29T00:00:00'
          duration: 86400
          site-visits: 11
        - timestamp: '2024-07-30T00:00:00'
          duration: 86400
          site-visits: 1
        - timestamp: '2024-07-31T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-01T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-02T00:00:00'
          duration: 86400
          site-visits: 30
        - timestamp: '2024-08-03T00:00:00'
          duration: 86400
          site-visits: 36
        - timestamp: '2024-08-04T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-05T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-06T00:00:00'
          duration: 86400
          site-visits: 2
        - timestamp: '2024-08-07T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-08T00:00:00'
          duration: 86400
          site-visits: 25
        - timestamp: '2024-08-09T00:00:00'
          duration: 86400
          site-visits: 31
        - timestamp: '2024-08-10T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-11T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-12T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-13T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-14T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-08-15T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-08-16T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-17T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-18T00:00:00'
          duration: 86400
          site-visits: 0

    networking-energy-to-serve-static-site-over-the-wire:
      pipeline:
        compute:
          - static-site-size-in-gb
          - network-energy-serving-static-site-per-view
          - network-energy-serving-static-site-total
          - energy-to-carbon
          - sci
      defaults:
        static-site-size-in-mb: 1.4 # from google pagespeed api
        kwh-per-gb-network: 0.001 # https://www.cloudcarbonfootprint.org/docs/methodology/#networking
        watts-per-tb: 1.2 # https://www.cloudcarbonfootprint.org/docs/methodology/#storage
        grid-intensity: 765.49 # US average
      inputs:
        - timestamp: '2024-07-22T00:00:00'
          duration: 86400
          site-visits: 12
        - timestamp: '2024-07-23T00:00:00'
          duration: 86400
          site-visits: 5
        - timestamp: '2024-07-24T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-07-25T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-07-26T00:00:00'
          duration: 86400
          site-visits: 10
        - timestamp: '2024-07-27T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-07-28T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-07-29T00:00:00'
          duration: 86400
          site-visits: 11
        - timestamp: '2024-07-30T00:00:00'
          duration: 86400
          site-visits: 1
        - timestamp: '2024-07-31T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-01T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-02T00:00:00'
          duration: 86400
          site-visits: 30
        - timestamp: '2024-08-03T00:00:00'
          duration: 86400
          site-visits: 36
        - timestamp: '2024-08-04T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-05T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-06T00:00:00'
          duration: 86400
          site-visits: 2
        - timestamp: '2024-08-07T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-08T00:00:00'
          duration: 86400
          site-visits: 25
        - timestamp: '2024-08-09T00:00:00'
          duration: 86400
          site-visits: 31
        - timestamp: '2024-08-10T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-11T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-12T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-13T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-14T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-08-15T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-08-16T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-17T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-18T00:00:00'
          duration: 86400
          site-visits: 0

    end-user-operational-carbon:
      pipeline:
        compute:
          - static-site-size-in-gb
          - end-user-energy
          - energy-to-carbon
          - sci
      defaults:
        end-user-energy-coefficient: 0.080 # https://sustainablewebdesign.org/estimating-digital-emissions/
        static-site-size-in-mb: 1.4 # from google pagespeed api
        kwh-per-gb-network: 0.001 # https://www.cloudcarbonfootprint.org/docs/methodology/#networking
        grid-intensity: 765.49 # US average
      inputs:
        - timestamp: '2024-07-22T00:00:00'
          duration: 86400
          site-visits: 12
        - timestamp: '2024-07-23T00:00:00'
          duration: 86400
          site-visits: 5
        - timestamp: '2024-07-24T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-07-25T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-07-26T00:00:00'
          duration: 86400
          site-visits: 10
        - timestamp: '2024-07-27T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-07-28T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-07-29T00:00:00'
          duration: 86400
          site-visits: 11
        - timestamp: '2024-07-30T00:00:00'
          duration: 86400
          site-visits: 1
        - timestamp: '2024-07-31T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-01T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-02T00:00:00'
          duration: 86400
          site-visits: 30
        - timestamp: '2024-08-03T00:00:00'
          duration: 86400
          site-visits: 36
        - timestamp: '2024-08-04T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-05T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-06T00:00:00'
          duration: 86400
          site-visits: 2
        - timestamp: '2024-08-07T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-08T00:00:00'
          duration: 86400
          site-visits: 25
        - timestamp: '2024-08-09T00:00:00'
          duration: 86400
          site-visits: 31
        - timestamp: '2024-08-10T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-11T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-12T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-13T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-14T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-08-15T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-08-16T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-17T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-18T00:00:00'
          duration: 86400
          site-visits: 0

    gh-pages-builds:
      pipeline:
        compute:
          - interpolate-power-curve
          - build-stage-cpu-factor-to-wattage
          - build-stage-cpu-wattage-times-build-duration
          - build-stage-cpu-wattage-to-energy-kwh
          - memory-coefficient-correction # memory coefficient in CCF is given /GB/hr - we want to convert to /GB/run-time-duration then x by run duration in s
          - memory-energy-per-build
          - sum-build-energy-components
          - build-energy-total
          - energy-to-carbon
          - sci
      defaults:
        end-user-energy-coefficient: 0.080 # https://sustainablewebdesign.org/estimating-digital-emissions/
        static-site-size-in-mb: 0.809473 # from google pagespeed api
        kwh-per-gb-network: 0.001 # https://www.cloudcarbonfootprint.org/docs/methodology/#networking
        grid-intensity: 765.49 # US average
        build-duration: 5
        build-memory-gb: 0.34
        builds-per-month: 3
        thermal-design-power: 205 # from our if-data
        cpu-utilization-during-build: 100
      inputs:
        - timestamp: '2024-07-22T00:00:00'
          duration: 86400
          site-visits: 12
        - timestamp: '2024-07-23T00:00:00'
          duration: 86400
          site-visits: 5
        - timestamp: '2024-07-24T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-07-25T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-07-26T00:00:00'
          duration: 86400
          site-visits: 10
        - timestamp: '2024-07-27T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-07-28T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-07-29T00:00:00'
          duration: 86400
          site-visits: 11
        - timestamp: '2024-07-30T00:00:00'
          duration: 86400
          site-visits: 1
        - timestamp: '2024-07-31T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-01T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-02T00:00:00'
          duration: 86400
          site-visits: 30
        - timestamp: '2024-08-03T00:00:00'
          duration: 86400
          site-visits: 36
        - timestamp: '2024-08-04T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-05T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-06T00:00:00'
          duration: 86400
          site-visits: 2
        - timestamp: '2024-08-07T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-08T00:00:00'
          duration: 86400
          site-visits: 25
        - timestamp: '2024-08-09T00:00:00'
          duration: 86400
          site-visits: 31
        - timestamp: '2024-08-10T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-11T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-12T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-13T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-14T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-08-15T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-08-16T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-17T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-18T00:00:00'
          duration: 86400
          site-visits: 0

    embodied-carbon-for-web-server:
      pipeline:
        compute:
          - embodied-carbon-web-server-origin
          - sci
      defaults:
        usage-ratio: 0.0014
      inputs:
        - timestamp: '2024-07-22T00:00:00'
          duration: 86400
          site-visits: 12
        - timestamp: '2024-07-23T00:00:00'
          duration: 86400
          site-visits: 5
        - timestamp: '2024-07-24T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-07-25T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-07-26T00:00:00'
          duration: 86400
          site-visits: 10
        - timestamp: '2024-07-27T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-07-28T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-07-29T00:00:00'
          duration: 86400
          site-visits: 11
        - timestamp: '2024-07-30T00:00:00'
          duration: 86400
          site-visits: 1
        - timestamp: '2024-07-31T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-01T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-02T00:00:00'
          duration: 86400
          site-visits: 30
        - timestamp: '2024-08-03T00:00:00'
          duration: 86400
          site-visits: 36
        - timestamp: '2024-08-04T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-05T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-06T00:00:00'
          duration: 86400
          site-visits: 2
        - timestamp: '2024-08-07T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-08T00:00:00'
          duration: 86400
          site-visits: 25
        - timestamp: '2024-08-09T00:00:00'
          duration: 86400
          site-visits: 31
        - timestamp: '2024-08-10T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-11T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-12T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-13T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-14T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-08-15T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-08-16T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-17T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-18T00:00:00'
          duration: 86400
          site-visits: 0

    embodied-carbon-for-cdn:
      pipeline:
        compute:
          - embodied-carbon-web-server-cdn
          - sci
      defaults:
        usage-ratio: 0.0014
      inputs:
        - timestamp: '2024-07-22T00:00:00'
          duration: 86400
          site-visits: 12
        - timestamp: '2024-07-23T00:00:00'
          duration: 86400
          site-visits: 5
        - timestamp: '2024-07-24T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-07-25T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-07-26T00:00:00'
          duration: 86400
          site-visits: 10
        - timestamp: '2024-07-27T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-07-28T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-07-29T00:00:00'
          duration: 86400
          site-visits: 11
        - timestamp: '2024-07-30T00:00:00'
          duration: 86400
          site-visits: 1
        - timestamp: '2024-07-31T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-01T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-02T00:00:00'
          duration: 86400
          site-visits: 30
        - timestamp: '2024-08-03T00:00:00'
          duration: 86400
          site-visits: 36
        - timestamp: '2024-08-04T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-05T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-06T00:00:00'
          duration: 86400
          site-visits: 2
        - timestamp: '2024-08-07T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-08T00:00:00'
          duration: 86400
          site-visits: 25
        - timestamp: '2024-08-09T00:00:00'
          duration: 86400
          site-visits: 31
        - timestamp: '2024-08-10T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-11T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-12T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-13T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-14T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-08-15T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-08-16T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-17T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-18T00:00:00'
          duration: 86400
          site-visits: 0

    embodied-carbon-for-github-server:
      pipeline:
        compute:
          - embodied-carbon-github
          - sci
      defaults:
        usage-ratio: 3.784666666666667e-8
        vCPUs: 160
        memory: 1280
      inputs:
        - timestamp: '2024-07-22T00:00:00'
          duration: 86400
          site-visits: 12
        - timestamp: '2024-07-23T00:00:00'
          duration: 86400
          site-visits: 5
        - timestamp: '2024-07-24T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-07-25T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-07-26T00:00:00'
          duration: 86400
          site-visits: 10
        - timestamp: '2024-07-27T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-07-28T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-07-29T00:00:00'
          duration: 86400
          site-visits: 11
        - timestamp: '2024-07-30T00:00:00'
          duration: 86400
          site-visits: 1
        - timestamp: '2024-07-31T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-01T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-02T00:00:00'
          duration: 86400
          site-visits: 30
        - timestamp: '2024-08-03T00:00:00'
          duration: 86400
          site-visits: 36
        - timestamp: '2024-08-04T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-05T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-06T00:00:00'
          duration: 86400
          site-visits: 2
        - timestamp: '2024-08-07T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-08T00:00:00'
          duration: 86400
          site-visits: 25
        - timestamp: '2024-08-09T00:00:00'
          duration: 86400
          site-visits: 31
        - timestamp: '2024-08-10T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-11T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-12T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-13T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-14T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-08-15T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-08-16T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-17T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-18T00:00:00'
          duration: 86400
          site-visits: 0

    embodied-carbon-for-end-user-devices:
      pipeline:
        compute:
          - embodied-carbon-devices
          - total-embodied-carbon
          - sci
      defaults:
        time: 40
      inputs:
        - timestamp: '2024-07-22T00:00:00'
          duration: 86400
          site-visits: 12
        - timestamp: '2024-07-23T00:00:00'
          duration: 86400
          site-visits: 5
        - timestamp: '2024-07-24T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-07-25T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-07-26T00:00:00'
          duration: 86400
          site-visits: 10
        - timestamp: '2024-07-27T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-07-28T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-07-29T00:00:00'
          duration: 86400
          site-visits: 11
        - timestamp: '2024-07-30T00:00:00'
          duration: 86400
          site-visits: 1
        - timestamp: '2024-07-31T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-01T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-02T00:00:00'
          duration: 86400
          site-visits: 30
        - timestamp: '2024-08-03T00:00:00'
          duration: 86400
          site-visits: 36
        - timestamp: '2024-08-04T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-05T00:00:00'
          duration: 86400
          site-visits: 17
        - timestamp: '2024-08-06T00:00:00'
          duration: 86400
          site-visits: 2
        - timestamp: '2024-08-07T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-08T00:00:00'
          duration: 86400
          site-visits: 25
        - timestamp: '2024-08-09T00:00:00'
          duration: 86400
          site-visits: 31
        - timestamp: '2024-08-10T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-11T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-12T00:00:00'
          duration: 86400
          site-visits: 13
        - timestamp: '2024-08-13T00:00:00'
          duration: 86400
          site-visits: 4
        - timestamp: '2024-08-14T00:00:00'
          duration: 86400
          site-visits: 3
        - timestamp: '2024-08-15T00:00:00'
          duration: 86400
          site-visits: 16
        - timestamp: '2024-08-16T00:00:00'
          duration: 86400
          site-visits: 18
        - timestamp: '2024-08-17T00:00:00'
          duration: 86400
          site-visits: 21
        - timestamp: '2024-08-18T00:00:00'
          duration: 86400
          site-visits: 0
